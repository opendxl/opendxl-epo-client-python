
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Basic System Find Example &#8212; McAfee ePolicy Orchestrator (ePO) DXL Client 0.2.1 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Basic Core Help Example" href="basiccorehelpexample.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="basiccorehelpexample.html" title="Basic Core Help Example"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">McAfee ePolicy Orchestrator (ePO) DXL Client 0.2.1 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="basic-system-find-example">
<h1>Basic System Find Example<a class="headerlink" href="#basic-system-find-example" title="Permalink to this headline">¶</a></h1>
<p>This sample invokes and displays the results of a &quot;system find&quot; remote command via the ePO DXL service.
The results of the find command are displayed in JSON format.</p>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>The samples configuration step has been completed (see <a class="reference internal" href="sampleconfig.html"><span class="doc">Samples Configuration</span></a>)</li>
<li>An ePO DXL service is running and available on the fabric. If version 5.0
or later of the DXL ePO extensions are installed on your ePO server, an
ePO DXL service should already be running on the fabric. If you are using an
earlier version of the DXL ePO extensions, you can use the
<a class="reference external" href="https://github.com/opendxl/opendxl-epo-service-python">ePO DXL Python Service</a>.</li>
<li>The client is authorized to invoke the ePO DXL Service, and the user that is
connecting to the ePO server (within the ePO DXL service) has permission to
execute the &quot;system find&quot; remote command (see <a class="reference internal" href="authorization.html"><span class="doc">Authorization</span></a>).</li>
</ul>
</div>
<div class="section" id="setup">
<h2>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h2>
<p>Modify the example to include the <cite>unique identifier</cite> associated with the ePO to invoke the remote command on.</p>
<p>For more information on the ePO unique identifier, refer to the following:</p>
<ul class="simple">
<li><a class="reference external" href="https://opendxl.github.io/opendxl-epo-service-python/pydoc/configuration.html#dxl-service-configuration-file-dxleposervice-config">Configuration File for ePO DXL Python Service (uniqueId property)</a></li>
<li>The <a class="reference internal" href="dxlepoclient.client.html#dxlepoclient.client.EpoClient.lookup_epo_unique_identifiers" title="dxlepoclient.client.EpoClient.lookup_epo_unique_identifiers"><code class="xref py py-func docutils literal notranslate"><span class="pre">dxlepoclient.client.EpoClient.lookup_epo_unique_identifiers()</span></code></a> method which will return a <code class="docutils literal notranslate"><span class="pre">set</span></code>
containing the identifiers for all ePO servers that are currently connected to the fabric.</li>
</ul>
<p>For example:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">EPO_UNIQUE_ID</span> <span class="o">=</span> <span class="s2">&quot;epo1&quot;</span>
</pre></div>
</div>
</div></blockquote>
<p>If only one ePO server is connected to the DXL fabric this constant can be set to <code class="docutils literal notranslate"><span class="pre">None</span></code> (the client will
automatically determine the ePO's unique identifier).</p>
<p>Modify the example to include the search text for the system find command.</p>
<p>For example:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">SEARCH_TEXT</span> <span class="o">=</span> <span class="s2">&quot;broker&quot;</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="running">
<h2>Running<a class="headerlink" href="#running" title="Permalink to this headline">¶</a></h2>
<p>To run this sample execute the <code class="docutils literal notranslate"><span class="pre">sample/basic/basic_system_find_example.py</span></code> script as follows:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">sample</span><span class="o">/</span><span class="n">basic</span><span class="o">/</span><span class="n">basic_system_find_example</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</div></blockquote>
<p>The output should appear similar to the following:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;EPOBranchNode.AutoID&quot;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
        <span class="s2">&quot;EPOComputerProperties.CPUSerialNum&quot;</span><span class="p">:</span> <span class="s2">&quot;N/A&quot;</span><span class="p">,</span>
        <span class="s2">&quot;EPOComputerProperties.CPUSpeed&quot;</span><span class="p">:</span> <span class="mi">2794</span><span class="p">,</span>
        <span class="s2">&quot;EPOComputerProperties.CPUType&quot;</span><span class="p">:</span> <span class="s2">&quot;Intel(R) Core(TM) i7-4980HQ CPU @ 2.80GHz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;EPOComputerProperties.ComputerName&quot;</span><span class="p">:</span> <span class="s2">&quot;broker1&quot;</span><span class="p">,</span>
        <span class="s2">&quot;EPOComputerProperties.DefaultLangID&quot;</span><span class="p">:</span> <span class="s2">&quot;0409&quot;</span><span class="p">,</span>
        <span class="s2">&quot;EPOComputerProperties.Description&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>

        <span class="o">...</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<p>The properties for each system found will be displayed.</p>
</div>
<div class="section" id="details">
<h2>Details<a class="headerlink" href="#details" title="Permalink to this headline">¶</a></h2>
<p>The majority of the sample code is shown below:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># The ePO unique identifier</span>
<span class="n">EPO_UNIQUE_ID</span> <span class="o">=</span> <span class="bp">None</span>

<span class="c1"># The search text</span>
<span class="n">SEARCH_TEXT</span> <span class="o">=</span> <span class="s2">&quot;broker&quot;</span>

<span class="c1"># Create the client</span>
<span class="k">with</span> <span class="n">DxlClient</span><span class="p">(</span><span class="n">config</span><span class="p">)</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>

    <span class="c1"># Connect to the fabric</span>
    <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>

    <span class="c1"># Create the ePO client</span>
    <span class="n">epo_client</span> <span class="o">=</span> <span class="n">EpoClient</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">EPO_UNIQUE_ID</span><span class="p">)</span>

    <span class="c1"># Run the system find command</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">epo_client</span><span class="o">.</span><span class="n">run_command</span><span class="p">(</span><span class="s2">&quot;system.find&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;searchText&quot;</span><span class="p">:</span> <span class="n">SEARCH_TEXT</span><span class="p">})</span>

    <span class="c1"># Load find result into list</span>
    <span class="n">res_list</span> <span class="o">=</span> <span class="n">MessageUtils</span><span class="o">.</span><span class="n">json_to_dict</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

    <span class="c1"># Display the results</span>
    <span class="k">print</span><span class="p">(</span><span class="n">MessageUtils</span><span class="o">.</span><span class="n">dict_to_json</span><span class="p">(</span><span class="n">res_list</span><span class="p">,</span> <span class="n">pretty_print</span><span class="o">=</span><span class="bp">True</span><span class="p">))</span>
</pre></div>
</div>
</div></blockquote>
<p>Once a connection is established to the DXL fabric, a <a class="reference internal" href="dxlepoclient.client.html#dxlepoclient.client.EpoClient" title="dxlepoclient.client.EpoClient"><code class="xref py py-class docutils literal notranslate"><span class="pre">dxlepoclient.client.EpoClient</span></code></a> instance is created
which will be used to invoke remote commands on the ePO server. The <cite>unique identifier</cite> of the ePO server
to invoke remote commands on is specified as an argument to the client constructor. In this particular case, a
value of <code class="docutils literal notranslate"><span class="pre">None</span></code> is specified which triggers the client to automatically determine the ePO server's unique identifier.
This will not work if multiple ePO servers are connected to the fabric (an exception will be raised).</p>
<p>Next, the <a class="reference internal" href="dxlepoclient.client.html#dxlepoclient.client.EpoClient.run_command" title="dxlepoclient.client.EpoClient.run_command"><code class="xref py py-func docutils literal notranslate"><span class="pre">dxlepoclient.client.EpoClient.run_command()</span></code></a> method is invoked
with a <code class="docutils literal notranslate"><span class="pre">searchText</span></code> parameter that is specified with the value of <code class="docutils literal notranslate"><span class="pre">broker</span></code>.</p>
<p>Finally, the JSON response text is loaded into a Python <code class="docutils literal notranslate"><span class="pre">list</span></code>, formatted,
and displayed to the screen.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Basic System Find Example</a><ul>
<li><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li><a class="reference internal" href="#setup">Setup</a></li>
<li><a class="reference internal" href="#running">Running</a></li>
<li><a class="reference internal" href="#details">Details</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="basiccorehelpexample.html"
                        title="previous chapter">Basic Core Help Example</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/basicsystemfindexample.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="basiccorehelpexample.html" title="Basic Core Help Example"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">McAfee ePolicy Orchestrator (ePO) DXL Client 0.2.1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, McAfee Inc.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.4.
    </div>
  </body>
</html>